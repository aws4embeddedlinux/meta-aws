From 6dcb1c327d4e9023855b92d6f7eb8e2c54e5616f Mon Sep 17 00:00:00 2001
From: dkostic <25055813+dkostic@users.noreply.github.com>
Date: Wed, 15 Mar 2023 18:45:30 -0700
Subject: [PATCH] Update the CI docker images documentation (#876)

Co-authored-by: dkostic <dkostic@amazon.com>
---
 tests/ci/README.md | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/tests/ci/README.md b/tests/ci/README.md
index d70dd3afb..5c25232bf 100644
--- a/tests/ci/README.md
+++ b/tests/ci/README.md
@@ -31,6 +31,18 @@ $ docker run -v `pwd`:`pwd` -w `pwd` -it ubuntu-20.04:clang-9x
 $ ./tests/ci/run_posix_tests.sh
 ```
 
+Before building a "non-base" image you need to build the corresponding base one.
+For example, to be able to build the `ubuntu-20.04_clang-9x` image from above,
+you first need to build the base image `ubuntu-20.04_base`. In addition, the
+base image has to be built with with the dependencies directory as the context
+so it has access to the script that installs dependencies. So the full command
+would look like this:
+```
+$ docker build -t ubuntu-18.04:base -f tests/ci/docker_images/linux-x86/ubuntu-18.04_base/Dockerfile tests/ci/docker_images/dependencies
+```
+For more examples, see `build_images.sh` script in directories corresponding
+to different platforms (linux-x86, linux-aarch, windows, rust).
+
 ## Test locations
 
 ### Unit tests
